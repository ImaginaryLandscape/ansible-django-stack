---

- name: Install need system libraries and tools
  apt:
    name:
    - bash
    - build-essential
    - aptitude
    - openssl
    - rng-tools
    - libssl-dev
    - libxslt1-dev 
    - libssl-doc
    - libxml2-dev
    - libjpeg8
    - libjpeg8-dev
    - libfreetype6
    - libfreetype6-dev
    - zlib1g-dev
    - libpq-dev
    - libsqlite3-dev
    - node-less
    state: latest
    update_cache: yes

- name: Install jpeg8
  apt:
    name:
      - libjpeg-turbo8-dev
    update_cache: "{{ update_apt_cache }}"
    force: yes
    state: present
  ignore_errors: yes

- name: Install base packages
  apt:
    update_cache: "{{ update_apt_cache }}"
    force: yes
    state: present
    name:
    - curl
    - psmisc
    - htop
    - git
    - git-core
    - tig
    - mercurial
    - psmisc # pstree
    - lsof
    - iptables-persistent
    - unzip
    - gettext


- name: Install software-properties-common
  apt:
    update_cache: "{{ update_apt_cache }}"
    force: yes
    state: present
    name:
    - software-properties-common


# - name: Add deadsnakes PPA to your sources list
#   apt_repository: 
#     repo: "deb http://nginx.org/packages/debian/ {{ansible_distribution_release}} nginx"
#     state: present
#     update_cache: "{{ update_apt_cache }}"


- name: Install Python System-level packages
  apt:
    update_cache: "{{ update_apt_cache }}"
    force: yes
    state: present
    name:
    - python-dev
    - python-pip
    - python-pycurl
    - python-virtualenv
    - python-setuptools
    - "{{ base__python_version }}"
    - python3-dev
    - python3-pip

